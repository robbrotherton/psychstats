{
  "hash": "c0c147718a52bb381158908f6834397d",
  "result": {
    "markdown": "---\ntitle: Triplett\n---\n\n```{=html}\n<div class=\"game-select\" style=\"width: 100%; display: flex; justify-content: center; font-family: Permanent Marker;\">\n        <button id=\"practice-button\" class=\"nav\" onclick=\"practice();\">practice</button>\n        <button id=\"alone-button\" class=\"nav\" onclick=\"alone();\">race alone</button>\n        <button id=\"competition-button\" class=\"nav\" onclick=\"competition();\">race together</button>\n</div>\n\n    \n<div class=\"title\">Competition Machine &mdash; </div>\n\n<div class=\"machine\">\n        <div id=\"track\" class=\"track\">\n        <button type=\"button\" id=\"handle1\" class=\"handle\"><span id=\"handle-text\">┘</span></button>\n        <div id=\"finish\" class=\"finish\">🏁</div>\n        <div id=\"flag\" class=\"flag\">🚩</div>\n    </div>\n\n    <div id=\"track2\" class=\"track\">\n        <button id=\"handle2\" class=\"handle\"><span id=\"handle2-text\">┘</span></button>\n        <div id=\"finish\"class=\"finish\">🏁</div>\n        <div id=\"flag2\" class=\"flag\" style=\"filter: invert(1);\">🚩</div>\n    </div>\n</div>\n    \n<div id=\"time\"><span>Your time: </span><span id=\"seconds\">0.00</span></div>\n<button class=\"reset-button nav\" onclick=\"reset();\">Reset</button>\n    \n\n    <div id=\"instructions\">\n        <ul>\n            <li>Click the 'handle' to the left of the 'track' to start.</li>\n            <li>Keep clicking as fast as you can until your flag reaches the end.</li>\n            <li>Click Race Alone to do a timed race by yourself.</li>\n            <li>Click Race Together to race against a competitor.</li>\n        </ul>\n    </div>\n\n    <div id=\"records\">\n        \n        <table id=\"records-table\">\n            <colgroup>\n                <col span=\"1\" style=\"width: 40%; text-align: right;\">\n                <col span=\"1\" style=\"width: 30%;\">\n                <col span=\"1\" style=\"width: 30%;\">\n              </colgroup>\n            <thead><th>👑 Records 👑</th><th>Previous</th><th>Best</th></thead>\n            <tr><td>🚩 Alone</td><td><span id=\"alone-previous\">-</span></td><td><span id=\"alone-best\">-</span></td></tr>\n            <tr><td>🚩<span style=\"filter: invert(1);\">🚩</span>Competition</td><td><span id=\"competition-previous\">-</span></td><td><span id=\"competition-best\">-</span></td></tr>\n        </table>\n    </div>\n```\n\n```{ojs}\n//| echo: false\ngame = {\n    var start, myTimer, myTurner;\nvar sec = d3.select(\"#seconds\")\nvar cli = d3.select(\"#clicks\")\nvar flag = d3.select(\"#flag\")\nvar flag2 = d3.select(\"#flag2\")\nvar clicks = 0;\nvar state;\nconst target_clicks = 50;\nvar mode = practice;\n\nvar records = [{prev: 0, best: 0},{prev: 0, best: 0}]\n\nvar handleState = 0;\nconst handle = d3.select(\"#handle-text\");\nconst handle2 = d3.select(\"#handle2-text\");\nconst handleText = [\"┘\",\"└\"]\n\nconst handleBtn = d3.select(\"#handle1\");\nhandleBtn.on(\"click\", clicked);\n\nfunction handleClicked() {\n    handleState++;\n    handle.text(handleText[handleState % 2]);\n}\n\nfunction turnHandle2() {\n    var handle2State = 0;\n    myTurner = setInterval( function(){\n        handle2State++;\n        handle2.text(handleText[handle2State % 2]);\n        if (handle2State > target_clicks) clearInterval(myTurner);\n    }, 7000 / target_clicks);\n}\n\nfunction clicked() {\n    handleClicked();\n    \n    if (clicks==0) {startTimer(); turnHandle2();}\n    if (clicks < target_clicks) {\n        clicks++;\n    cli.text(clicks);\n    flag.transition().duration(300).style(\"left\", `${clicks*(100/target_clicks)*1.00}%`);\n    } \n    if (clicks == target_clicks) stopTimer();\n}\n\nfunction startTimer() {\n    start = Date.now();\n    myTimer= setInterval( function(){\n        var delta = Date.now() - start; // milliseconds elapsed since start\n        sec.html(delta / 1000);\n    }, 10);\n\n    flag2.transition().ease(d3.easeLinear).duration(7000).style(\"left\", \"100%\")\n}\n\nfunction stopTimer() {\n    clearInterval(myTimer);\n\n    var time = Number(sec.html());\n\n    if(state!=\"practice\") {\n        d3.select(\"#\" + state + \"-previous\").text(time);\n\n        var previousBest = Number(d3.select(\"#\" + state + \"-best\").text());\n        if(isNaN(previousBest)) d3.select(\"#\" + state + \"-best\").text(time);\n        else if (time < previousBest) d3.select(\"#\" + state + \"-best\").text(time);\n    }\n}\n\n// function updateTable(time, cell) {\n//     d3.select(cell).text(time);\n// }\n\nfunction practice() {\n    state = \"practice\";\n    reset();\n    d3.selectAll(\".nav\").classed(\"selected\", false);\n    d3.select(\"#practice-button\").classed(\"selected\", true);\n    // d3.select(\"#practice\").style(\"display\", \"block\");\n    d3.select(\"#instructions\").style(\"display\", \"block\");\n    d3.select(\"#track2\").style(\"display\", \"none\");\n    d3.select(\"#time\").style(\"display\", \"none\");\n}\n\nfunction alone() {\n    state = \"alone\";\n    reset();\n    d3.selectAll(\".nav\").classed(\"selected\", false);\n    d3.select(\"#alone-button\").classed(\"selected\", true);\n    d3.select(\"#time\").style(\"display\", \"block\");\n    d3.select(\"#track2\").style(\"display\", \"none\");\n    d3.select(\"#instructions\").style(\"display\", \"none\");\n}\n\nfunction competition() {\n    state = \"competition\";\n    reset();\n    d3.selectAll(\".nav\").classed(\"selected\", false);\n    d3.select(\"#competition-button\").classed(\"selected\", true);\n    d3.select(\"#time\").style(\"display\", \"block\");\n    d3.select(\"#track2\").style(\"display\", \"block\");\n    d3.select(\"#instructions\").style(\"display\", \"none\");\n}\n\nfunction reset() {\n    clearInterval(myTimer);\n    clearInterval(myTurner);\n    sec.text(\"0.00\");\n    cli.text(0);\n    flag.transition().duration(1000).style(\"left\", \"0%\");\n    flag2.transition().duration(1000).style(\"left\", \"0%\");\n    clicks = 0;\n}\n\npractice();\n}\n```\n\n```{css}\nbody {\n    max-width: 800px;\n    font-family: Permanent Marker;\n    font-size: 1.8em;\n    margin: 3em auto;\n}\n\n.title {\n    font-size: calc(min(1.5em, 5vw));\n    margin: 0 auto;\n    width: 100%;\n    display: flex;\n    justify-content: center;\n    margin-top: 2em;\n}\n#instructions {\n    font-family: Pangolin;\n    font-size: calc(max(min(3vw, 1em), 0.6em));\n}\n\n.machine {\n    /* content: \"\"; */\n    width: 90%;\n    margin: 0 auto;\n    padding: 1px;\n    border-radius: 10px;\n    background: #e1ccb2;\n}\n\n\n#time {\n    margin-left: 10em;\n}\n\n.nav {\n    font-family: Permanent Marker;\n    font-size: 1em;\n    background: none;\n    border-radius: 5px;\n    border: none;\n    margin: 0 1em;\n    color: #aaa;\n}\n.nav:hover {\n    background: lightblue;\n}\n\n.nav.selected {\n    color: black;\n}\n\n\n\n.reset-button {\n    margin-left: 50%;\n    transform: translateX(-50%);\n\n}\n\n.track {\n    position: relative; \n    width: 80%; \n    height: 20px; \n    margin: 2em auto; \n    background: #eee;\n}\n\n.flag {\n    position: absolute; \n    font-size: 1em; \n    top: -20px;\n    cursor: default;\n}\n.finish {\n    position: absolute; \n    right: 0; \n    font-size: 1em; \n    transform: rotate(90deg) translate(-6px, -1em);\n    top: -5;\n    cursor: default;\n}\n\n.handle {\n    touch-action: manipulation;\n    position: relative;\n    left: -2em;\n    top: -0.4em;\n    border: none;\n    width: 2em;\n    height: 3em;\n    background: none;\n}\n\n.handle:after {\n    position: absolute;\n    top: 5%;\n    left: 10%;\n    content: \"\";\n    width: 80%;\n    height: 60%;\n    background: brown;\n    color: red;\n    border-radius: 3px;\n}\n\n.handle > span {\n    position: absolute;\n    font-size: 2em;\n    font-weight: 800;\n    transform: translate(-50%, -20%);\n}\n#handle1 {\n    cursor: grab;\n}\n#handle1:hover > span {\n    color: red;\n}\n\n/* #records {\n    border: 1px solid;\n    text-align: center;\n    margin: 0 auto;\n    width: 70%;\n} */\n#records-table {\n    border: 1px solid;\n    margin: 0 auto;\n    font-size: 0.8em;\n    width: 70%;\n    table-layout: fixed;\n}\n#records-table td {\n    /* border: 1px solid; */\n    text-align: center;\n    /* width: 1%; */\n}\n```\n\n",
    "supporting": [
      "triplett_files"
    ],
    "filters": [],
    "includes": {}
  }
}